# Copy/Paste/Merge Test
# Tests: copy, paste, merge, smart offset
cls 

# 1. Create Borane (BH3)
new Borane
add mol xyz <<BOR
4

B        0.0000000       0.0000000      -1.2778648
H        0.9419139       0.0000000      -1.6172590
H       -0.4709570       0.8163013      -1.6172590
H       -0.4709570      -0.8163013      -1.6172590
BOR
rebond 

# 2. Create Ammonia (NH3)
new Ammonia
add mol xyz <<AMM
4

N        0.0000000       0.0000000       0.2878648
H        0.9419139       0.0000000       0.6272589
H       -0.4709570       0.8163013       0.6272589
H       -0.4709570      -0.8163013       0.6272589
AMM
rebond

list mols
time 1

# 3. Create Copies for Merge
# Copy Borane
sw Borane
select :
copy
new Borane_Copy
paste
time 0.5

# Copy Ammonia
sw Ammonia
select :
copy
new Ammonia_Copy
paste
time 0.5

# 4. Merge Copies
new Complex_merged
# Merge Borane_Copy
merge Borane_Copy
# Merge Ammonia_Copy
merge Ammonia_Copy
time 1
rebond

list
time 1

# 5. Cut & Paste Originals
# Cut from Ammonia
sw Ammonia
select :
cut
time 0.5

# Paste into Borane
sw Borane
paste
rename Complex_pasted
time 1
# rebond # no rebond --> NH3-(no bond)-BH3

list
time 1

# 6. Smart Offset Test
# Create Methane
new Methane
add mol xyz <<MET
5

C        0.0000000       0.0000000       0.0000000
H        0.6300000       0.6300000       0.6300000
H       -0.6300000      -0.6300000       0.6300000
H       -0.6300000       0.6300000      -0.6300000
H        0.6300000      -0.6300000      -0.6300000
MET
rebond
time 1

# Copy from Complex_merged
sw Complex_merged
select :
copy

# Paste into Methane with offset
sw Methane
paste --offset 3
time 1

list
time 1
list mols

del mol Ammonia
del mol Methane
del mol Complex_merged
del mol Complex_pasted