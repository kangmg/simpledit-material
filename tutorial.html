<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simpledit Documentation</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Arial, sans-serif;
            background: #fafafa;
            color: #333;
            line-height: 1.6;
        }

        .container {
            display: flex;
            min-height: 100vh;
        }

        /* Sidebar */
        .sidebar {
            width: 280px;
            background: white;
            border-right: 1px solid #e0e0e0;
            position: fixed;
            height: 100vh;
            overflow-y: auto;
            padding: 30px 0;
        }

        .sidebar-header {
            padding: 0 25px 20px;
            border-bottom: 1px solid #e0e0e0;
        }

        .sidebar-header h1 {
            font-size: 1.5em;
            font-weight: 600;
            color: #1a1a1a;
            margin-bottom: 8px;
        }

        .sidebar-header .version {
            font-size: 0.85em;
            color: #888;
        }

        .sidebar nav {
            padding: 20px 0;
        }

        .nav-section {
            margin-bottom: 25px;
        }

        .nav-section-title {
            padding: 0 25px 10px;
            font-size: 0.75em;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            color: #888;
            font-weight: 600;
        }

        .nav-link {
            display: block;
            padding: 8px 25px;
            color: #555;
            text-decoration: none;
            transition: all 0.2s;
        }

        .nav-link:hover {
            background: #f5f5f5;
            color: #1a1a1a;
        }

        .nav-link.active {
            background: #bb86fc;
            color: white;
            font-weight: 500;
        }

        /* Main Content */
        .main-content {
            margin-left: 280px;
            flex: 1;
            padding: 50px 80px;
            max-width: 1000px;
        }

        h1 {
            font-size: 2.5em;
            margin-bottom: 20px;
            color: #1a1a1a;
        }

        h2 {
            font-size: 1.8em;
            margin: 50px 0 20px;
            color: #1a1a1a;
            border-bottom: 2px solid #bb86fc;
            padding-bottom: 10px;
        }

        h3 {
            font-size: 1.3em;
            margin: 30px 0 15px;
            color: #333;
        }

        h4 {
            font-size: 1.1em;
            margin: 20px 0 10px;
            color: #555;
        }

        p {
            margin-bottom: 15px;
            color: #555;
        }

        code {
            background: #f5f5f5;
            padding: 2px 8px;
            border-radius: 3px;
            font-family: 'JetBrains Mono', 'Consolas', monospace;
            font-size: 0.9em;
            color: #bb86fc;
        }

        pre {
            background: #1e1e1e;
            color: #e0e0e0;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 20px 0;
            font-family: 'JetBrains Mono', 'Consolas', monospace;
            font-size: 0.9em;
            line-height: 1.5;
            position: relative;
        }

        .copy-btn {
            position: absolute;
            top: 8px;
            right: 8px;
            background: #333;
            color: #e0e0e0;
            border: none;
            padding: 6px 12px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.8em;
            opacity: 0;
            transition: opacity 0.2s, background 0.2s;
        }

        pre:hover .copy-btn {
            opacity: 1;
        }

        .copy-btn:hover {
            background: #555;
        }

        .copy-btn.copied {
            background: #4caf50;
        }

        pre code {
            background: none;
            padding: 0;
            color: inherit;
        }

        .command {
            color: #00ff00;
        }

        .comment {
            color: #888;
        }

        .output {
            color: #87CEEB;
        }

        ul,
        ol {
            margin: 15px 0 15px 30px;
        }

        li {
            margin-bottom: 8px;
            color: #555;
        }

        .alert {
            padding: 15px 20px;
            border-radius: 8px;
            margin: 20px 0;
            border-left: 4px solid;
        }

        .alert-info {
            background: #e3f2fd;
            border-color: #2196f3;
            color: #1565c0;
        }

        .alert-tip {
            background: #f3e5f5;
            border-color: #bb86fc;
            color: #6a1b9a;
        }

        .alert-warning {
            background: #fff3e0;
            border-color: #ff9800;
            color: #e65100;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
        }

        th,
        td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #e0e0e0;
        }

        th {
            background: #f5f5f5;
            font-weight: 600;
            color: #333;
        }

        thead {
            background: #bb86fc;
            color: white;
        }

        thead th {
            background: transparent;
        }

        tr:hover {
            background: #f9f9f9;
        }

        .badge {
            display: inline-block;
            padding: 3px 8px;
            border-radius: 12px;
            font-size: 0.8em;
            font-weight: 500;
            margin-left: 8px;
        }

        .badge-alias {
            background: #e3f2fd;
            color: #1565c0;
        }

        .badge-flag {
            background: #f3e5f5;
            color: #6a1b9a;
        }

        .test-card {
            background: white;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            border: 1px solid #e0e0e0;
        }

        .test-card h4 {
            margin-top: 0;
            color: #bb86fc;
        }

        .load-test-btn {
            display: inline-block;
            margin-top: 10px;
            padding: 8px 16px;
            background: #bb86fc;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.9em;
            transition: background 0.2s;
        }

        .load-test-btn:hover {
            background: #9965d4;
        }

        .load-test-btn:active {
            background: #7b4eb3;
        }

        @media (max-width: 1024px) {
            .sidebar {
                width: 240px;
            }

            .main-content {
                margin-left: 240px;
                padding: 40px 40px;
            }
        }

        @media (max-width: 768px) {
            .sidebar {
                position: relative;
                width: 100%;
                height: auto;
            }

            .main-content {
                margin-left: 0;
                padding: 30px 20px;
            }
        }
    </style>
</head>

<body>
    <div class="container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <h1>Simpledit</h1>
                <div class="version">Molecular Editor</div>
            </div>

            <nav>
                <div class="nav-section">
                    <div class="nav-section-title">Introduction</div>
                    <a href="#overview" class="nav-link">Overview</a>
                    <a href="#design-principles" class="nav-link">Design Principles</a>
                    <a href="#getting-started" class="nav-link">Getting Started</a>
                </div>

                <div class="nav-section">
                    <div class="nav-section-title">Command Reference</div>
                    <a href="#core-commands" class="nav-link">Core Commands</a>
                    <a href="#atom-management" class="nav-link">Atom Management</a>
                    <a href="#bonds" class="nav-link">Bonds</a>
                    <a href="#geometry" class="nav-link">Geometry</a>
                    <a href="#molecules" class="nav-link">Molecules</a>
                    <a href="#clipboard" class="nav-link">Clipboard</a>
                    <a href="#visualization" class="nav-link">Visualization</a>
                    <a href="#history" class="nav-link">History</a>
                    <a href="#utilities" class="nav-link">Utilities</a>
                </div>

                <div class="nav-section">
                    <div class="nav-section-title">Test Suite</div>
                    <a href="#tests" class="nav-link">All Tests</a>
                </div>

                <div class="nav-section">
                    <div class="nav-section-title">Best Practices</div>
                    <a href="#workflows" class="nav-link">Efficient Workflows</a>
                    <a href="#troubleshooting" class="nav-link">Troubleshooting</a>
                </div>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <section id="overview">
                <h1>Simpledit Documentation</h1>
                <p>Simpledit is a powerful molecular editor with a command-line interface, designed for efficient
                    manipulation of molecular structures through an intuitive console.</p>

                <div class="alert alert-info">
                    <strong>Quick Start:</strong> Press <code>C</code> to open the console. Type <code>help</code> to
                    see all available commands.
                </div>
            </section>

            <section id="design-principles">
                <h2>Design Principles</h2>

                <h3>1. Verb-Noun Command Structure</h3>
                <p>All commands follow a consistent <strong>Verb-Noun</strong> pattern for clarity and predictability:
                </p>

                <pre><code><span class="command">add atom</span> C 0 0 0      <span class="comment"># Verb: add, Noun: atom</span>
<span class="command">del bond</span> 0 1         <span class="comment"># Verb: del, Noun: bond</span>
<span class="command">set dist</span> 0 1 1.5    <span class="comment"># Verb: set, Noun: dist</span></code></pre>

                <h3>2. Explicit Subcommands</h3>
                <p>Operations require explicit targets to avoid ambiguity:</p>
                <ul>
                    <li><code>add atom</code> / <code>add bond</code> / <code>add mol</code></li>
                    <li><code>del atom</code> / <code>del bond</code> / <code>del mol</code></li>
                    <li><code>list atoms</code> / <code>list mols</code> / <code>list frags</code></li>
                </ul>

                <h3>3. Aliases for Efficiency</h3>
                <p>Common commands have short aliases:</p>
                <table>
                    <thead>
                        <tr>
                            <th>Full Command</th>
                            <th>Aliases</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code>help</code></td>
                            <td><code>h</code></td>
                        </tr>
                        <tr>
                            <td><code>list</code></td>
                            <td><code>ls</code>, <code>l</code></td>
                        </tr>
                        <tr>
                            <td><code>add</code></td>
                            <td><code>a</code></td>
                        </tr>
                        <tr>
                            <td><code>delete</code></td>
                            <td><code>del</code>, <code>rm</code>, <code>remove</code></td>
                        </tr>
                        <tr>
                            <td><code>select</code></td>
                            <td><code>sel</code></td>
                        </tr>
                        <tr>
                            <td><code>trans</code></td>
                            <td><code>tr</code>, <code>translation</code></td>
                        </tr>
                        <tr>
                            <td><code>rotate</code></td>
                            <td><code>rot</code></td>
                        </tr>
                        <tr>
                            <td><code>measure</code></td>
                            <td><code>meas</code>, <code>info</code></td>
                        </tr>
                    </tbody>
                </table>

                <h3>4. Powerful Syntax Features</h3>

                <h4>Range Selection</h4>
                <pre><code><span class="command">select</span> 0:5         <span class="comment"># Select atoms 0,1,2,3,4,5</span>
<span class="command">select</span> :           <span class="comment"># Select all atoms</span>
<span class="command">del atom</span> 2:7       <span class="comment"># Delete atoms 2-7</span></code></pre>

                <h4>Flags and Options</h4>
                <pre><code><span class="command">paste</span> --offset 5         <span class="comment"># Long form</span>
<span class="command">paste</span> -o 5               <span class="comment"># Short form</span>
<span class="command">label</span> --symbol -n        <span class="comment"># Multiple flags</span>
<span class="command">capture</span> --no-background  <span class="comment"># Boolean flag</span>
<span class="command">capture</span> -n               <span class="comment"># Boolean flag</span></code></pre>

                <h4>Heredoc Syntax</h4>
                <pre><code><span class="command">add mol xyz</span> &lt;&lt;EOF
3
Water molecule
O  0.000  0.000  0.000
H  0.757  0.586  0.000
H -0.757  0.586  0.000
EOF</code></pre>

                <h4>Line Continuation</h4>
                <pre><code><span class="command">add atom</span> C 0 0 0 \
<span class="command">add atom</span> H 1 0 0 \
<span class="command">add atom</span> H 0 1 0</code></pre>

                <h4>Inline Time Delays</h4>
                <pre><code><span class="command">rot</span> 10 0 0 \time 0.2    <span class="comment"># Rotate and wait 0.2s</span></code></pre>

                <h3>5. Smart Defaults</h3>
                <p>The system intelligently assists you:</p>
                <ul>
                    <li><strong>Auto-offset:</strong> <code>paste</code> and <code>merge</code> automatically shift
                        atoms to avoid collisions</li>
                    <li><strong>Bond detection:</strong> Bonds are auto-calculated based on threshold</li>
                    <li><strong>Per-molecule state:</strong> Each molecule has independent history and settings</li>
                </ul>
            </section>

            <section id="getting-started">
                <h2>Getting Started</h2>

                <h3>Opening the Console</h3>
                <ol>
                    <li>Press <code>C</code> key to toggle the console</li>
                    <li>The console appears on the right side with green terminal theme</li>
                    <li>Type commands and press <code>Enter</code> to execute</li>
                </ol>

                <h3>Your First Molecule</h3>
                <pre><code><span class="comment"># Create a water molecule</span>
<span class="command">add atom</span> O 0 0 0
<span class="command">add atom</span> H 0.757 0.586 0
<span class="command">add atom</span> H -0.757 0.586 0

<span class="comment"># View what you created</span>
<span class="command">list</span>

<span class="comment"># Add bonds</span>
<span class="command">add bond</span> 0 1
<span class="command">add bond</span> 0 2</code></pre>

                <h3>Console Features</h3>
                <ul>
                    <li><strong>Command History:</strong> Use <code>↑</code> and <code>↓</code> arrows to navigate
                        history</li>
                    <li><strong>Multi-line Input:</strong> Use <code>\</code> at end of line to continue</li>
                    <li><strong>Comments:</strong> Lines starting with <code>#</code> are ignored</li>
                    <li><strong>Clear Output:</strong> Type <code>clear</code> or <code>cls</code></li>
                </ul>

                <h3>Visual Elements</h3>
                <p>Simpledit includes helpful visual aids:</p>
                <ul>
                    <li><strong>Axis Helper:</strong> Bottom-right corner shows XYZ orientation (X=red, Y=green, Z=blue)
                    </li>
                    <li><strong>Atom Labels:</strong> Toggle with <code>label</code> command</li>
                    <li><strong>Measurements:</strong> Visual feedback when measuring geometry</li>
                </ul>
            </section>

            <!-- Command Reference Sections -->
            <section id="core-commands">
                <h2>Core Commands</h2>

                <h3><code>help</code> <span class="badge badge-alias">h</span></h3>
                <p>Display available commands or detailed help for a specific command.</p>
                <pre><code><span class="command">help</span>           <span class="comment"># List all commands</span>
<span class="command">help add</span>       <span class="comment"># Show help for 'add' command</span>
<span class="command">h rotate</span>      <span class="comment"># Using alias</span></code></pre>

                <h3><code>list</code> <span class="badge badge-alias">ls, l</span></h3>
                <p>List atoms, molecules, or fragments.</p>
                <pre><code><span class="command">list</span>           <span class="comment"># List all atoms in active molecule</span>
<span class="command">list -s</span>        <span class="comment"># List only selected atoms</span>
<span class="command">list mols</span>      <span class="comment"># List all molecules</span>
<span class="command">list frags</span>     <span class="comment"># List disconnected fragments</span>
<span class="command">ls</span>             <span class="comment"># Alias for list</span></code></pre>

                <h3><code>clear</code> <span class="badge badge-alias">cls</span></h3>
                <p>Clear the console output.</p>
                <pre><code><span class="command">clear</span>
<span class="command">cls</span>           <span class="comment"># Alias</span></code></pre>
            </section>

            <section id="atom-management">
                <h2>Atom Management</h2>

                <h3><code>add atom</code></h3>
                <p>Add an atom at specified coordinates.</p>
                <pre><code><span class="command">add atom</span> C 0 0 0              <span class="comment"># Carbon at origin</span>
<span class="command">add atom</span> H 1.2 0 0            <span class="comment"># Hydrogen at (1.2, 0, 0)</span>
<span class="command">a atom</span> O 0 0 1.5              <span class="comment"># Using alias</span></code></pre>

                <h3><code>add mol</code></h3>
                <p>Import molecular data using heredoc syntax.</p>
                <pre><code><span class="command">add mol xyz</span> &lt;&lt;EOF
3
Methane
C  0.000  0.000  0.000
H  0.629  0.629  0.629
H -0.629 -0.629  0.629
EOF</code></pre>

                <h3><code>select</code> <span class="badge badge-alias">sel</span></h3>
                <p>Select atoms for operations.</p>
                <pre><code><span class="command">select</span> 0 1 2                 <span class="comment"># Select specific atoms</span>
<span class="command">select</span> 0:5                   <span class="comment"># Select range 0-5</span>
<span class="command">select</span> :                     <span class="comment"># Select all atoms</span>
<span class="command">sel</span> 0 3 5                    <span class="comment"># Using alias</span></code></pre>

                <h3><code>del atom</code> <span class="badge badge-alias">delete, rm, remove</span></h3>
                <p>Delete atoms by index.</p>
                <pre><code><span class="command">del atom</span> 0 1 5               <span class="comment"># Delete specific atoms</span>
<span class="command">del atom</span> 0:5                 <span class="comment"># Delete range</span>
<span class="command">del atom</span> :                   <span class="comment"># Delete all atoms</span>
<span class="command">rm atom</span> 3                    <span class="comment"># Using alias</span></code></pre>
            </section>

            <section id="bonds">
                <h2>Bonds</h2>

                <h3><code>add bond</code></h3>
                <p>Create a bond between two atoms.</p>
                <pre><code><span class="command">add bond</span> 0 1                 <span class="comment"># Bond between atoms 0 and 1</span>
<span class="command">a bond</span> 2 3                   <span class="comment"># Using alias</span></code></pre>

                <h3><code>del bond</code></h3>
                <p>Remove a bond between two atoms.</p>
                <pre><code><span class="command">del bond</span> 0 1                 <span class="comment"># Remove bond</span>
<span class="command">rm bond</span> 2 3                  <span class="comment"># Using alias</span></code></pre>

                <h3><code>rebond</code> <span class="badge badge-alias">rb</span></h3>
                <p>Recalculate all bonds based on current threshold.</p>
                <pre><code><span class="command">set threshold</span> 1.8            <span class="comment"># Set bond detection distance</span>
<span class="command">rebond</span>                        <span class="comment"># Recalculate bonds</span>
<span class="command">rb</span>                            <span class="comment"># Using alias</span></code></pre>
            </section>

            <section id="geometry">
                <h2>Geometry</h2>

                <h3><code>set dist</code> <span class="badge badge-alias">distance</span></h3>
                <p>Set distance between two atoms.</p>
                <pre><code><span class="command">set dist</span> 0 1 1.5             <span class="comment"># Set distance to 1.5 Å</span>
<span class="command">set distance</span> 0 1 1.5       <span class="comment"># Using alias</span></code></pre>

                <h3><code>set angle</code></h3>
                <p>Set angle between three atoms.</p>
                <pre><code><span class="command">set angle</span> 0 1 2 109.5       <span class="comment"># Set angle to 109.5°</span></code></pre>

                <h3><code>set dihedral</code></h3>
                <p>Set dihedral angle between four atoms.</p>
                <pre><code><span class="command">set dihedral</span> 0 1 2 3 180    <span class="comment"># Set dihedral to 180°</span></code></pre>

                <h3><code>measure</code> <span class="badge badge-alias">meas, info</span></h3>
                <p>Measure distances, angles, or dihedrals.</p>
                <pre><code><span class="command">measure</span> 0 1                  <span class="comment"># Measure distance</span>
<span class="command">measure</span> 0 1 2                <span class="comment"># Measure angle</span>
<span class="command">measure</span> 0 1 2 3              <span class="comment"># Measure dihedral</span>
<span class="command">measure</span>                       <span class="comment"># Info on selected atoms</span>
<span class="command">meas</span> 0 1                     <span class="comment"># Using alias</span></code></pre>

                <h3><code>rotate</code> <span class="badge badge-alias">rot</span></h3>
                <p>Rotate molecule around origin.</p>
                <pre><code><span class="command">rotate</span> 90 0 0                <span class="comment"># Rotate 90° around X-axis</span>
<span class="command">rotate</span> 0 45 0                <span class="comment"># Rotate 45° around Y-axis</span>
<span class="command">rot</span> 0 0 30                   <span class="comment"># Rotate 30° around Z-axis</span></code></pre>

                <h3><code>trans</code> <span class="badge badge-alias">tr, translation</span></h3>
                <p>Translate (move) the molecule.</p>
                <pre><code><span class="command">trans</span> 5 0 0                  <span class="comment"># Move 5 units on X-axis</span>
<span class="command">trans</span> 0 -2 0                 <span class="comment"># Move -2 units on Y-axis</span>
<span class="command">tr</span> 1 1 1                     <span class="comment"># Using alias</span></code></pre>

                <h3><code>center</code> <span class="badge badge-alias">cen</span></h3>
                <p>Move molecule's center of mass to origin (0,0,0).</p>
                <pre><code><span class="command">center</span>
<span class="command">cen</span>                           <span class="comment"># Using alias</span></code></pre>

                <h3><code>set scale</code></h3>
                <p>Set visual scale for atoms or bonds.</p>
                <pre><code><span class="command">set scale atom</span> 1.5           <span class="comment"># Increase atom size by 1.5x</span>
<span class="command">set scale bond</span> 0.8           <span class="comment"># Decrease bond thickness to 0.8x</span>
<span class="command">set scale atom</span> 2.0           <span class="comment"># Double atom size</span></code></pre>
                <div class="alert alert-tip">
                    The <code>set scale</code> command adjusts the visual rendering scale without changing actual atomic
                    coordinates. Useful for improving visualization clarity.
                </div>

                <h3><code>substitute</code> <span class="badge badge-alias">sub</span></h3>
                <p>Substitute atoms or molecular groups with intelligent fragment alignment.</p>
                <pre><code><span class="comment"># Atom substitution</span>
<span class="command">sub atom</span> 0 N                 <span class="comment"># Change atom 0 to Nitrogen</span>
<span class="command">sub atom</span> 3 O                 <span class="comment"># Change atom 3 to Oxygen</span>

<span class="comment"># Group substitution (Explicit mode)</span>
<span class="command">sub grp</span> 1 0 -n SourceMol 1 0  <span class="comment"># Target: leaving=1, anchor=0</span>
                                     <span class="comment"># Source: leaving=1, anchor=0</span>

<span class="comment"># Group substitution (Implicit dummy mode)</span>
<span class="command">sub grp</span> 0 -n SourceMol 0      <span class="comment"># Finds terminal 'X' atoms automatically</span></code></pre>
                <div class="alert alert-info">
                    <strong>Group Substitution Syntax:</strong>
                    <ul>
                        <li><strong>Explicit:</strong>
                            <code>sub grp &lt;target_leaving&gt; &lt;target_anchor&gt; -n &lt;source_mol&gt; &lt;source_leaving&gt; &lt;source_anchor&gt;</code>
                        </li>
                        <li><strong>Implicit:</strong>
                            <code>sub grp &lt;target_anchor&gt; -n &lt;source_mol&gt; &lt;source_anchor&gt;</code> (uses
                            terminal 'X' dummy atoms)
                        </li>
                    </ul>
                    The <code>-n</code> flag specifies the source molecule name (recommended). Alternatively,
                    <code>-i &lt;index&gt;</code> can specify source molecule by 0-based index, but this is not
                    recommended as indices may change. Fragments are aligned using vector matching for proper
                    orientation.
                </div>

                <h3><code>debug_conn</code></h3>
                <p>Display detailed bond connectivity information for debugging.</p>
                <pre><code><span class="command">debug_conn</span>                     <span class="comment"># Show all bonds and connectivity</span></code></pre>
                <div class="alert alert-tip">
                    Useful for diagnosing bonding issues, verifying molecular structure, or understanding fragment
                    connectivity.
                </div>
            </section>

            <section id="molecules">
                <h2>Molecule Management</h2>

                <h3><code>new</code></h3>
                <p>Create a new empty molecule.</p>
                <pre><code><span class="command">new</span>                           <span class="comment"># Create unnamed molecule</span>
<span class="command">new</span> "Benzene"                 <span class="comment"># Create with name</span></code></pre>

                <h3><code>switch</code> <span class="badge badge-alias">sw</span></h3>
                <p>Switch between molecules.</p>
                <pre><code><span class="command">switch</span> 1                      <span class="comment"># Switch by index</span>
<span class="command">switch</span> "Benzene"              <span class="comment"># Switch by name</span>
<span class="command">sw</span> 2                          <span class="comment"># Using alias</span></code></pre>

                <h3><code>rename</code> <span class="badge badge-alias">rn</span></h3>
                <p>Rename the active molecule.</p>
                <pre><code><span class="command">rename</span> "New Name"
<span class="command">rn</span> "Molecule 1"              <span class="comment"># Using alias</span></code></pre>

                <h3><code>del mol</code></h3>
                <p>Delete a molecule.</p>
                <pre><code><span class="command">del mol</span>                       <span class="comment"># Delete active molecule</span>
<span class="command">del mol</span> 2                    <span class="comment"># Delete by index</span>
<span class="command">del mol</span> "Benzene"            <span class="comment"># Delete by name</span></code></pre>

                <h3><code>merge</code> <span class="badge badge-alias">mg</span></h3>
                <p>Merge another molecule into the active one.</p>
                <pre><code><span class="command">merge</span> 1                       <span class="comment"># Merge molecule 1</span>
<span class="command">merge</span> "Water"                 <span class="comment"># Merge by name</span>
<span class="command">mg</span> 2                          <span class="comment"># Using alias</span></code></pre>

                <div class="alert alert-tip">
                    <strong>Smart Offset:</strong> The <code>merge</code> command automatically applies spatial offset
                    to prevent atom collisions.
                </div>
            </section>

            <section id="clipboard">
                <h2>Clipboard Operations</h2>

                <h3><code>copy</code> <span class="badge badge-alias">cp</span></h3>
                <p>Copy selected atoms to clipboard.</p>
                <pre><code><span class="command">select</span> 0:3
<span class="command">copy</span>
<span class="command">cp</span>                            <span class="comment"># Using alias</span></code></pre>

                <h3><code>paste</code> <span class="badge badge-alias">pa</span></h3>
                <p>Paste atoms from clipboard.</p>
                <pre><code><span class="command">paste</span>                         <span class="comment"># Paste with smart offset</span>
<span class="command">paste</span> --offset 5             <span class="comment"># Explicit offset</span>
<span class="command">paste</span> -o 3                   <span class="comment"># Short flag form</span>
<span class="command">pa</span>                            <span class="comment"># Using alias</span></code></pre>

                <h3><code>cut</code> <span class="badge badge-alias">ct</span></h3>
                <p>Cut selected atoms to clipboard (copy + delete).</p>
                <pre><code><span class="command">select</span> 5:8
<span class="command">cut</span>
<span class="command">ct</span>                            <span class="comment"># Using alias</span></code></pre>
            </section>

            <section id="visualization">
                <h2>Visualization</h2>

                <h3><code>label</code> <span class="badge badge-alias">lbl</span></h3>
                <p>Control atom labels display.</p>
                <pre><code><span class="command">label</span> -s                      <span class="comment"># Show element symbols</span>
<span class="command">label</span> --symbol                <span class="comment"># Long form</span>
<span class="command">label</span> -n                      <span class="comment"># Show atom numbers</span>
<span class="command">label</span> --number                <span class="comment"># Long form</span>
<span class="command">label</span> -a                      <span class="comment"># Show both</span>
<span class="command">label</span> --all                   <span class="comment"># Long form</span>
<span class="command">label</span> -o                      <span class="comment"># Turn off labels</span>
<span class="command">label</span> --off                   <span class="comment"># Long form</span>
<span class="command">lbl</span> -s                        <span class="comment"># Using alias</span></code></pre>

                <h3><code>camera</code> <span class="badge badge-alias">cam</span></h3>
                <p>Set camera control mode.</p>
                <pre><code><span class="command">camera</span> orbit                 <span class="comment"># Orbit controls (constrained)</span>
<span class="command">camera</span> trackball             <span class="comment"># Trackball controls (free rotation)</span>
<span class="command">cam</span> orbit                    <span class="comment"># Using alias</span></code></pre>

                <h3><code>projection</code> <span class="badge badge-alias">proj</span></h3>
                <p>Set camera projection type.</p>
                <pre><code><span class="command">projection</span> persp             <span class="comment"># Perspective projection</span>
<span class="command">projection</span> ps                <span class="comment"># Short form</span>
<span class="command">projection</span> ortho             <span class="comment"># Orthographic projection</span>
<span class="command">projection</span> ot                <span class="comment"># Short form</span>
<span class="command">proj</span> persp                    <span class="comment"># Using alias</span></code></pre>

                <h3><code>capture</code> <span class="badge badge-alias">cap</span></h3>
                <p>Capture a snapshot of the viewport.</p>
                <pre><code><span class="command">capture</span>                       <span class="comment"># Capture with background</span>
<span class="command">capture</span> --no-background      <span class="comment"># Transparent background</span>
<span class="command">capture</span> -n                   <span class="comment"># Short flag form</span>
<span class="command">cap</span>                           <span class="comment"># Using alias</span></code></pre>
            </section>

            <section id="history">
                <h2>History Management</h2>

                <h3><code>undo</code> <span class="badge badge-alias">u</span></h3>
                <p>Undo the last destructive operation.</p>
                <pre><code><span class="command">undo</span>
<span class="command">u</span>                             <span class="comment"># Using alias</span></code></pre>

                <h3><code>redo</code> <span class="badge badge-alias">r, y</span></h3>
                <p>Redo the last undone operation.</p>
                <pre><code><span class="command">redo</span>
<span class="command">r</span>                             <span class="comment"># Using alias</span>
<span class="command">y</span>                             <span class="comment"># Alternative alias</span></code></pre>

                <div class="alert alert-info">
                    <strong>Per-Molecule History:</strong> Each molecule maintains its own independent undo/redo stack.
                </div>
            </section>

            <section id="utilities">
                <h2>Utilities</h2>

                <h3><code>time</code> <span class="badge badge-alias">sleep</span></h3>
                <p>Pause execution for specified duration (useful in scripts and animations).</p>
                <pre><code><span class="command">time</span> 1                        <span class="comment"># Wait 1 second</span>
<span class="command">time</span> 0.5                      <span class="comment"># Wait 0.5 seconds</span>
<span class="command">sleep</span> 2                       <span class="comment"># Using alias</span>

<span class="comment"># Inline usage for animations</span>
<span class="command">rot</span> 10 0 0 \time 0.2         <span class="comment"># Rotate and wait</span></code></pre>
            </section>

            <!-- Test Suite Section -->
            <section id="tests">
                <h2>Test Suite</h2>
                <p>Simpledit includes 19 comprehensive test files covering all features. Each test can be copied and
                    pasted directly into the console.</p>

                <div class="test-card">
                    <h4>01_basic_commands.txt</h4>
                    <p><strong>Purpose:</strong> Introduction to console interface and basic navigation</p>
                    <p><strong>Features Tested:</strong></p>
                    <ul>
                        <li><code>help</code> - Command discovery</li>
                        <li><code>list</code> - Viewing atoms</li>
                        <li><code>clear</code> - Console management</li>
                    </ul>
                </div>

                <div class="test-card">
                    <h4>02_atom_management.txt</h4>
                    <p><strong>Purpose:</strong> Fundamental atom manipulation operations</p>
                    <p><strong>Features Tested:</strong></p>
                    <ul>
                        <li><code>add atom</code> - Creating atoms</li>
                        <li><code>select</code> - Selection (individual, range, all)</li>
                        <li><code>del atom</code> - Deletion operations</li>
                        <li><code>info</code> - Atom information</li>
                    </ul>
                </div>

                <div class="test-card">
                    <h4>03_bond_operations.txt</h4>
                    <p><strong>Purpose:</strong> Bond creation and automatic connectivity</p>
                    <p><strong>Features Tested:</strong></p>
                    <ul>
                        <li><code>add bond</code> - Manual bond creation</li>
                        <li><code>del bond</code> - Bond removal</li>
                        <li><code>rebond</code> - Automatic bond detection</li>
                        <li><code>set threshold</code> - Bond distance threshold</li>
                    </ul>
                </div>

                <div class="test-card">
                    <h4>04_geometry_adjustments.txt</h4>
                    <p><strong>Purpose:</strong> Precise molecular geometry control</p>
                    <p><strong>Features Tested:</strong></p>
                    <ul>
                        <li><code>set dist</code> - Distance adjustment</li>
                        <li><code>set angle</code> - Angle adjustment</li>
                        <li><code>set dihedral</code> - Dihedral angle adjustment</li>
                        <li><code>measure</code> - Geometry measurements</li>
                    </ul>
                    <div class="alert alert-tip">
                        Tests the sophisticated fragment-based geometry engine that moves only necessary atoms.
                    </div>
                </div>

                <div class="test-card">
                    <h4>05_heredoc_add.txt</h4>
                    <p><strong>Purpose:</strong> Import complete molecular structures</p>
                    <p><strong>Features Tested:</strong></p>
                    <ul>
                        <li>Heredoc syntax (<code>&lt;&lt;EOF</code>)</li>
                        <li>XYZ format import</li>
                        <li>Multi-line input handling</li>
                    </ul>
                </div>

                <div class="test-card">
                    <h4>06_batch_commands.txt</h4>
                    <p><strong>Purpose:</strong> Efficient command chaining</p>
                    <p><strong>Features Tested:</strong></p>
                    <ul>
                        <li>Backslash (<code>\</code>) line continuation</li>
                        <li>Comment syntax (<code>#</code>)</li>
                        <li>Multi-line command execution</li>
                    </ul>
                </div>

                <div class="test-card">
                    <h4>07_molecule_management.txt</h4>
                    <p><strong>Purpose:</strong> Multi-molecule workflows</p>
                    <p><strong>Features Tested:</strong></p>
                    <ul>
                        <li><code>new</code> - Creating molecules</li>
                        <li><code>switch</code> - Switching between molecules</li>
                        <li><code>rename</code> - Renaming molecules</li>
                        <li><code>del mol</code> - Molecule deletion</li>
                        <li>Independent history per molecule</li>
                    </ul>
                </div>

                <div class="test-card">
                    <h4>08_copy_paste_merge.txt</h4>
                    <p><strong>Purpose:</strong> Transfer and combine molecular structures</p>
                    <p><strong>Features Tested:</strong></p>
                    <ul>
                        <li><code>copy</code> / <code>cut</code> - Clipboard operations</li>
                        <li><code>paste</code> - With smart offset</li>
                        <li><code>merge</code> - Molecule combination</li>
                        <li><code>--offset</code> flag - Manual offset control</li>
                    </ul>
                    <div class="alert alert-tip">
                        Demonstrates the smart collision avoidance system for paste/merge operations.
                    </div>
                </div>

                <div class="test-card">
                    <h4>09_display_labels.txt</h4>
                    <p><strong>Purpose:</strong> Visual customization</p>
                    <p><strong>Features Tested:</strong></p>
                    <ul>
                        <li><code>label</code> - Different label modes (symbol, number, all, off)</li>
                        <li><code>camera</code> - Camera control modes</li>
                        <li><code>projection</code> - Perspective vs orthographic</li>
                    </ul>
                </div>

                <div class="test-card">
                    <h4>10_fragment_analysis.txt</h4>
                    <p><strong>Purpose:</strong> Connectivity analysis</p>
                    <p><strong>Features Tested:</strong></p>
                    <li><code>list frags</code> - Fragment detection</li>
                    <li><code>unbond</code> - Breaking connectivity</li>
                    <li>Fragment-based selection</li>
                    </ul>
                </div>

                <div class="test-card">
                    <h4>11_range_selection.txt</h4>
                    <p><strong>Purpose:</strong> Efficient atom selection patterns</p>
                    <p><strong>Features Tested:</strong></p>
                    <ul>
                        <li>Range syntax (<code>0:3</code>)</li>
                        <li>All selection (<code>:</code>)</li>
                        <li>Mixed selection modes</li>
                        <li>Range deletion</li>
                    </ul>
                </div>

                <div class="test-card">
                    <h4>12_aliases.txt</h4>
                    <p><strong>Purpose:</strong> Command aliases and shortcuts</p>
                    <p><strong>Features Tested:</strong></p>
                    <ul>
                        <li><code>tr</code> for <code>trans</code></li>
                        <li>Flag shortcuts (<code>-o</code>, <code>-s</code>, <code>-n</code>)</li>
                        <li><code>paste -o</code> - Offset flag</li>
                        <li><code>label -o</code> - Label flags</li>
                        <li><code>ps</code> / <code>ot</code> - Projection shortcuts</li>
                    </ul>
                </div>

                <div class="test-card">
                    <h4>13_undo_redo.txt</h4>
                    <p><strong>Purpose:</strong> History management and state recovery</p>
                    <p><strong>Features Tested:</strong></p>
                    <ul>
                        <li><code>undo</code> - Reverting changes</li>
                        <li><code>redo</code> - Reapplying changes</li>
                        <li>Visual verification with <code>time</code> delays</li>
                        <li>Per-molecule history independence</li>
                    </ul>
                </div>

                <div class="test-card">
                    <h4>14_transformations.txt</h4>
                    <p><strong>Purpose:</strong> Molecular transformations and positioning</p>
                    <p><strong>Features Tested:</strong></p>
                    <ul>
                        <li><code>rotate</code> - Incremental rotations (10° steps)</li>
                        <li><code>trans</code> - Incremental translations (0.5 unit steps)</li>
                        <li><code>center</code> - Center of mass repositioning</li>
                        <li>Inline <code>\time</code> for smooth animations</li>
                        <li>Combined transformations</li>
                    </ul>
                    <div class="alert alert-tip">
                        Uses small incremental steps with timing to create smooth visual animations of molecular
                        movements.
                    </div>
                </div>

                <div class="test-card">
                    <h4>15_visual_scaling.txt</h4>
                    <p><strong>Purpose:</strong> Molecular scaling and coordinate transformations</p>
                    <p><strong>Features Tested:</strong></p>
                    <ul>
                        <li><code>scale</code> - Uniform coordinate scaling</li>
                        <li>Factor-based size adjustment</li>
                        <li>Incremental scaling with smooth animations</li>
                        <li>Combined with rotation for visual effects</li>
                    </ul>
                </div>

                <div class="test-card">
                    <h4>16_debug_connectivity.txt</h4>
                    <p><strong>Purpose:</strong> Bond connectivity debugging and verification</p>
                    <p><strong>Features Tested:</strong></p>
                    <ul>
                        <li><code>debug_conn</code> - Connectivity information display</li>
                        <li>Bond verification after manual operations</li>
                        <li>Fragment connectivity analysis</li>
                        <li>Troubleshooting bonding issues</li>
                    </ul>
                </div>

                <div class="test-card">
                    <h4>17_substitute_command.txt</h4>
                    <p><strong>Purpose:</strong> Atom and group substitution</p>
                    <p><strong>Features Tested:</strong></p>
                    <ul>
                        <li><code>sub atom</code> - Element substitution</li>
                        <li><code>sub grp</code> (Mode A) - Explicit group substitution</li>
                        <li><code>sub grp</code> (Mode B) - Implicit dummy atom mode</li>
                        <li>Vector alignment for fragment orientation</li>
                        <li>Bond preservation during substitution</li>
                    </ul>
                    <div class="alert alert-tip">
                        Demonstrates the advanced molecular fragment substitution engine with intelligent geometric
                        alignment.
                    </div>
                </div>

                <div class="test-card">
                    <h4>18_substitute_benzene.txt</h4>
                    <p><strong>Purpose:</strong> Complex group substitution with benzene, methane, and water</p>
                    <p><strong>Features Tested:</strong></p>
                    <ul>
                        <li>Benzene-Methane substitution</li>
                        <li>Benzene-Water substitution</li>
                        <li>Terminal dummy atom ('X') handling</li>
                        <li>Multi-molecule substitution workflows</li>
                        <li>Source molecule removal after substitution</li>
                    </ul>
                    <div class="alert alert-info">
                        Comprehensive test for the substitute command using real organic molecules.
                    </div>
                </div>

                <div class="test-card">
                    <h4>19_geometry_comprehensive.txt</h4>
                    <p><strong>Purpose:</strong> Comprehensive geometry adjustment testing</p>
                    <p><strong>Features Tested:</strong></p>
                    <ul>
                        <li><code>set dist</code> - Bond length adjustments with fragment movement</li>
                        <li><code>set angle</code> - Angle adjustments with proper pivot behavior</li>
                        <li><code>set dihedral</code> - Dihedral rotation with rigid body mechanics</li>
                        <li>Real-time UI slider updates</li>
                        <li>Fragment-based geometry engine verification</li>
                    </ul>
                    <div class="alert alert-tip">
                        Tests the sophisticated fragment identification and rigid body rotation mechanics that ensure
                        only intended atoms move during geometry adjustments.
                    </div>
                </div>

                <h3>Running Tests</h3>
                <ol>
                    <li>Navigate to the <code>tests/</code> directory</li>
                    <li>Open any test file in a text editor</li>
                    <li>Copy the entire content</li>
                    <li>Paste into the Simpledit console</li>
                    <li>Watch the automated execution with time delays</li>
                </ol>
            </section>

            <!-- Best Practices Section -->
            <section id="workflows">
                <h2>Efficient Workflows</h2>

                <h3>Building Molecules</h3>
                <p>Use heredoc for complex structures:</p>
                <pre><code><span class="command">add mol xyz</span> &lt;&lt;EOF
6
Benzene
C  1.40  0.00  0.00
C  0.70  1.21  0.00
C -0.70  1.21  0.00
C -1.40  0.00  0.00
C -0.70 -1.21  0.00
C  0.70 -1.21  0.00
EOF
<span class="command">rebond</span>                        <span class="comment"># Auto-detect bonds</span></code></pre>

                <h3>Incremental Adjustments</h3>
                <p>Use small steps with timing for visual feedback:</p>
                <pre><code><span class="command">rot</span> 10 0 0 \time 0.1
<span class="command">rot</span> 10 0 0 \time 0.1
<span class="command">rot</span> 10 0 0 \time 0.1</code></pre>

                <h3>Working with Multiple Molecules</h3>
                <pre><code><span class="command">new</span> "Reactant"
<span class="comment"># Build first molecule...</span>

<span class="command">new</span> "Product"
<span class="comment"># Build second molecule...</span>

<span class="command">sw</span> 1                          <span class="comment"># Switch back</span>
<span class="command">list mols</span>                     <span class="comment"># View all molecules</span></code></pre>

                <h3>Clipboard Workflows</h3>
                <pre><code><span class="command">select</span> 0:5                    <span class="comment"># Select fragment</span>
<span class="command">copy</span>                          <span class="comment"># Copy to clipboard</span>
<span class="command">sw</span> 2                          <span class="comment"># Switch molecule</span>
<span class="command">paste</span> -o 5                    <span class="comment"># Paste with offset</span></code></pre>
            </section>

            <section id="troubleshooting">
                <h2>Troubleshooting</h2>

                <h3>Atoms Not Bonding</h3>
                <div class="alert alert-warning">
                    <strong>Solution:</strong> Adjust the bond threshold and recalculate.
                </div>
                <pre><code><span class="command">set threshold</span> 1.8            <span class="comment"># Increase threshold</span>
<span class="command">rebond</span>                        <span class="comment"># Recalculate</span></code></pre>

                <h3>Molecule Off-Center</h3>
                <div class="alert alert-warning">
                    <strong>Solution:</strong> Use the center command.
                </div>
                <pre><code><span class="command">center</span>                        <span class="comment"># Move to origin</span></code></pre>

                <h3>Accidental Deletion</h3>
                <div class="alert alert-warning">
                    <strong>Solution:</strong> Use undo to revert.
                </div>
                <pre><code><span class="command">undo</span>                          <span class="comment"># Undo last action</span></code></pre>

                <h3>Paste Collision</h3>
                <div class="alert alert-warning">
                    <strong>Solution:</strong> The system auto-applies offset, or specify manually.
                </div>
                <pre><code><span class="command">paste</span> -o 10                   <span class="comment"># Larger offset</span></code></pre>

                <h3>Command Not Found</h3>
                <div class="alert alert-warning">
                    <strong>Solution:</strong> Check subcommands and syntax.
                </div>
                <pre><code><span class="command">help</span> add                     <span class="comment"># View command help</span>
<span class="comment"># Use explicit subcommands:</span>
<span class="command">add atom</span> C 0 0 0              <span class="comment"># Not just 'add C 0 0 0'</span></code></pre>
            </section>

            <section>
                <h2>Additional Resources</h2>
                <ul>
                    <li><strong>Quick Reference:</strong> <code>/docs/usage.md</code> - Command syntax cheat sheet</li>
                    <li><strong>Test README:</strong> <code>tests/README.md</code> - Test file descriptions</li>
                    <li><strong>Source Code:</strong> <code>src/commandRegistry.js</code> - Full command implementations
                    </li>
                </ul>

                <div class="alert alert-info">
                    <strong>Pro Tip:</strong> Use <code>help &lt;command&gt;</code> extensively to learn command syntax
                    and options.
                </div>
            </section>
        </main>
    </div>

    <script>
        // Simple smooth scrolling for navigation links
        document.querySelectorAll('.nav-link').forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                const target = document.querySelector(e.target.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({ behavior: 'smooth', block: 'start' });

                    // Update active link
                    document.querySelectorAll('.nav-link').forEach(l => l.classList.remove('active'));
                    e.target.classList.add('active');
                }
            });
        });

        // Highlight active section on scroll
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    const id = entry.target.getAttribute('id');
                    const link = document.querySelector(`.nav-link[href="#${id}"]`);
                    if (link) {
                        document.querySelectorAll('.nav-link').forEach(l => l.classList.remove('active'));
                        link.classList.add('active');
                    }
                }
            });
        }, { threshold: 0.5 });

        document.querySelectorAll('section[id]').forEach(section => {
            observer.observe(section);
        });

        // Add copy buttons to all code blocks
        document.querySelectorAll('pre code').forEach(codeBlock => {
            const pre = codeBlock.parentElement;
            const button = document.createElement('button');
            button.className = 'copy-btn';
            button.textContent = 'Copy';
            button.addEventListener('click', async () => {
                // Extract text content, removing HTML tags
                const text = codeBlock.textContent;
                try {
                    await navigator.clipboard.writeText(text);
                    button.textContent = 'Copied!';
                    button.classList.add('copied');
                    setTimeout(() => {
                        button.textContent = 'Copy';
                        button.classList.remove('copied');
                    }, 2000);
                } catch (err) {
                    console.error('Failed to copy:', err);
                    button.textContent = 'Failed';
                    setTimeout(() => {
                        button.textContent = 'Copy';
                    }, 2000);
                }
            });
            pre.appendChild(button);
        });

        // Add "Load Test" buttons to test cards
        const testFiles = {
            '01': 'https://raw.githubusercontent.com/kangmg/simpledit/refs/heads/main/tests/01_basic_commands.txt',
            '02': 'https://raw.githubusercontent.com/kangmg/simpledit/refs/heads/main/tests/02_atom_management.txt',
            '03': 'https://raw.githubusercontent.com/kangmg/simpledit/refs/heads/main/tests/03_bond_operations.txt',
            '04': 'https://raw.githubusercontent.com/kangmg/simpledit/refs/heads/main/tests/04_geometry_adjustments.txt',
            '05': 'https://raw.githubusercontent.com/kangmg/simpledit/refs/heads/main/tests/05_heardoc_add.txt',
            '06': 'https://raw.githubusercontent.com/kangmg/simpledit/refs/heads/main/tests/06_batch_commands.txt',
            '07': 'https://raw.githubusercontent.com/kangmg/simpledit/refs/heads/main/tests/07_molecule_management.txt',
            '08': 'https://raw.githubusercontent.com/kangmg/simpledit/refs/heads/main/tests/08_copy_paste_merge.txt',
            '09': 'https://raw.githubusercontent.com/kangmg/simpledit/refs/heads/main/tests/09_display_labels.txt',
            '10': 'https://raw.githubusercontent.com/kangmg/simpledit/refs/heads/main/tests/10_fragment_analysis.txt',
            '11': 'https://raw.githubusercontent.com/kangmg/simpledit/refs/heads/main/tests/11_range_selection.txt',
            '12': 'https://raw.githubusercontent.com/kangmg/simpledit/refs/heads/main/tests/12_aliases.txt',
            '13': 'https://raw.githubusercontent.com/kangmg/simpledit/refs/heads/main/tests/13_undo_redo.txt',
            '14': 'https://raw.githubusercontent.com/kangmg/simpledit/refs/heads/main/tests/14_transformations.txt',
            '15': 'https://raw.githubusercontent.com/kangmg/simpledit/refs/heads/main/tests/15_visual_scaling.txt',
            '16': 'https://raw.githubusercontent.com/kangmg/simpledit/refs/heads/main/tests/16_debug_connectivity.txt',
            '17': 'https://raw.githubusercontent.com/kangmg/simpledit/refs/heads/main/tests/17_substitute_command.txt',
            '18': 'https://raw.githubusercontent.com/kangmg/simpledit/refs/heads/main/tests/18_substitute_benzene.txt',
            '19': 'https://raw.githubusercontent.com/kangmg/simpledit/refs/heads/main/tests/19_geometry_comprehensive.txt'
        };

        document.querySelectorAll('.test-card').forEach((card, index) => {
            const testNum = String(index + 1).padStart(2, '0');
            const url = testFiles[testNum];
            if (url) {
                const button = document.createElement('button');
                button.className = 'load-test-btn';
                button.textContent = '📋 Copy Test to Clipboard';
                button.addEventListener('click', async () => {
                    button.textContent = 'Loading...';
                    try {
                        const response = await fetch(url);
                        if (!response.ok) throw new Error('Failed to fetch');
                        const text = await response.text();
                        await navigator.clipboard.writeText(text);
                        button.textContent = '✓ Copied! Paste in console';
                        button.style.background = '#4caf50';
                        setTimeout(() => {
                            button.textContent = '📋 Copy Test to Clipboard';
                            button.style.background = '';
                        }, 3000);
                    } catch (err) {
                        console.error('Failed to load test:', err);
                        button.textContent = '✗ Failed to load';
                        button.style.background = '#f44336';
                        setTimeout(() => {
                            button.textContent = '📋 Copy Test to Clipboard';
                            button.style.background = '';
                        }, 3000);
                    }
                });
                card.appendChild(button);
            }
        });
    </script>
</body>

</html>